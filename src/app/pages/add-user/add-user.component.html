<div class="parent-container">
    <div class="row"></div>
    <input class="search" pInputText type="text" (input)="getUsers(searchText)" [(ngModel)]="searchText" placeholder="Search user" />
</div>
    <div class="row"></div>
<div class="card">
    <p-table
    [columns]="getColumns()" 
    [value]="getUsers(searchText)" 
    [rows]="10"
    [paginator]="true"
    [tableStyle]="{ 'min-width': '50rem' }">
        <ng-template pTemplate="header" let-columns>
            <tr>
                <th *ngFor="let col of columns">
                    {{ col.header }}
                </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData let-columns="columns">
            <tr>
                <td *ngFor="let col of columns">
                    {{ rowData[col.field] }}
                    <span *ngIf="!rowData[col.field]">Field not found: {{ col.field }}</span>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>
    <div class="row"></div>
<p-button (onClick)="showDialog()" label="Add-User" />
<div class = "user-pop-up-form">
    <p-dialog header="Add-User" [modal]="true" [(visible)]="visible" [contentStyle]="{'dialog-box':null}">
        <form class = "add-user-form" #userForm="ngForm" (ngSubmit)="onSubmit()">
            <div class = "container">
                <div class="row"></div>
                    <p-floatLabel>
                        <input class="first-name-box" pInputText id="firstname" name="firstname" [(ngModel)]="firstname" required>
                        <div class="error-message" *ngIf="!userForm.submitted  && !userForm.controls['firstname']?.valid && userForm.controls['firstname']?.touched">
                        *Name is required.
                        </div>
                        <label class="text-label">First Name</label>
                    </p-floatLabel>
                <div class="row"></div>
                    <p-floatLabel>
                        <input class="lastname-box" pInputText id="lastname" name="lastname" [(ngModel)]="lastname" required> 
                        <div class="error-message" *ngIf="!userForm.submitted && !userForm.controls['lastname']?.valid && userForm.controls['lastname']?.touched">
                            *Surname is required.
                        </div>
                        <label class="text-label"> Surname </label>
                    </p-floatLabel>
                <div class="row"></div>
                    <p-floatLabel>
                        <input class="property-name-box" pInputText id="propertyname" name="propertyname"  [(ngModel)]="propertyname" required>
                        <div class="error-message" *ngIf="!userForm.submitted && !userForm.controls['propertyname']?.valid && userForm.controls['propertyname']?.touched">
                            *Property Name is required.
                        </div>
                        <label class="text-label"> Property Name </label> 
                    </p-floatLabel>
                <div class="row"></div>
                    <p-floatLabel>
                        <input class="user-email-box" pInputText id="email" type="email" name="email"  [(ngModel)]="email" required email="true" >
                        <div class="error-message" *ngIf="!userForm.submitted && !userForm.controls['email']?.valid && userForm.controls['email']?.touched">
                            *Email is required.
                        </div>
                        <label class="text-label"> Email </label> 
                    </p-floatLabel>
                <div class="row"></div>
                    <p-floatLabel>
                        <input class="tp-number-box" pInputText id="telephonenumber" name="telephonenumber"  [(ngModel)]="telephonenumber" required #telephoneNumber="ngModel" tpValidator maxlength="10">
                        <div class="error-message" *ngIf="!userForm.submitted && !userForm.controls['telephonenumber']?.valid && userForm.controls['telephonenumber']?.touched">
                            *A 10-digit mobile number is required.
                        </div>
                        <label class="text-label"> Mobile Number </label> 
                    </p-floatLabel>
                <div class="row1"></div>
                    <div class="button-container">
                        <p-button class="add-btn" (onClick)="closeDialog()" [disabled]="!userForm.valid" type="submit" [raised]="true" [rounded]="true" label="Add" severity="warning"/>
                    </div>  
            </div>
        </form>
    </p-dialog>
</div>
